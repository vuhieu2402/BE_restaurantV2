{
  "info": {
    "name": "Restaurant Chatbot API",
    "description": "Complete API collection for testing the restaurant chatbot",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string",
      "description": "API base URL"
    },
    {
      "key": "room_id",
      "value": "1",
      "type": "string",
      "description": "Default chat room ID"
    },
    {
      "key": "restaurant_id",
      "value": "1",
      "type": "string",
      "description": "Default restaurant ID"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "01. Authentication",
      "item": [
        {
          "name": "Login - Get JWT Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.success && jsonData.data.access) {",
                  "  pm.collectionVariables.set('token', jsonData.data.access);",
                  "  console.log('Token saved!');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"test\",\n  \"password\": \"your_password_here\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login/",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login", ""]
            },
            "description": "Login to get JWT token for authentication"
          }
        }
      ]
    },
    {
      "name": "02. Chatbot Messages",
      "item": [
        {
          "name": "Send Message - FAQ Hours",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"What are your opening hours?\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test FAQ - Opening hours query"
          }
        },
        {
          "name": "Send Message - FAQ Location",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Where are you located?\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test FAQ - Location query"
          }
        },
        {
          "name": "Send Message - FAQ Delivery",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Do you deliver? What is the fee?\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test FAQ - Delivery information"
          }
        },
        {
          "name": "Send Message - General Recommendation",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"What do you recommend for lunch?\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test general recommendation request"
          }
        },
        {
          "name": "Send Message - Weather-Aware (Cold)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"What do you recommend for this weather?\",\n  \"restaurant_id\": {{restaurant_id}},\n  \"context\": {\n    \"weather\": {\n      \"temp\": 10,\n      \"condition\": \"Rain\"\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test weather-aware recommendation (cold weather)"
          }
        },
        {
          "name": "Send Message - Weather-Aware (Hot)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"What do you recommend for this weather?\",\n  \"restaurant_id\": {{restaurant_id}},\n  \"context\": {\n    \"weather\": {\n      \"temp\": 35,\n      \"condition\": \"Clear\"\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test weather-aware recommendation (hot weather)"
          }
        },
        {
          "name": "Send Message - Dietary Preference",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"I want something vegetarian for lunch under 100k\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test recommendation with dietary preferences"
          }
        },
        {
          "name": "Send Message - Escalation Request",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"I want to speak to a human person\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test escalation to human staff"
          }
        }
      ],
      "description": "Test various chatbot message scenarios"
    },
    {
      "name": "03. Context Management",
      "item": [
        {
          "name": "Get Conversation Context",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/context/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "context", ""]
            },
            "description": "Retrieve conversation context and history"
          }
        }
      ]
    },
    {
      "name": "04. Feedback",
      "item": [
        {
          "name": "Submit Feedback - Positive",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": {{room_id}},\n  \"restaurant_id\": {{restaurant_id}},\n  \"feedback_type\": \"recommendation\",\n  \"rating\": 5,\n  \"suggested_items\": [1, 2, 3],\n  \"accepted_items\": [1],\n  \"user_comment\": \"Great recommendations!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/feedback/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "feedback", ""]
            },
            "description": "Submit positive feedback (5 stars)"
          }
        },
        {
          "name": "Submit Feedback - Negative",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"room_id\": {{room_id}},\n  \"restaurant_id\": {{restaurant_id}},\n  \"feedback_type\": \"recommendation\",\n  \"rating\": 2,\n  \"suggested_items\": [1, 2],\n  \"accepted_items\": [],\n  \"user_comment\": \"Not what I was looking for\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/feedback/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "feedback", ""]
            },
            "description": "Submit negative feedback (2 stars)"
          }
        }
      ]
    },
    {
      "name": "05. Test Scenarios",
      "item": [
        {
          "name": "Scenario 1: Multi-turn Conversation",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hi there!\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test: Greeting"
          }
        },
        {
          "name": "Scenario 2: Follow-up Recommendation",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"What about dinner options?\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test: Context remembers previous conversation"
          }
        },
        {
          "name": "Scenario 3: Frustration Detection",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"This is frustrating and terrible service!\",\n  \"restaurant_id\": {{restaurant_id}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/chat/chatbot/rooms/{{room_id}}/message/",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "chatbot", "rooms", "{{room_id}}", "message", ""]
            },
            "description": "Test: Escalation triggers on frustration"
          }
        }
      ],
      "description": "Complete conversation flow tests"
    }
  ]
}
